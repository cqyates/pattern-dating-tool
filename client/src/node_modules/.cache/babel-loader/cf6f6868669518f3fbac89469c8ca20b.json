{"ast":null,"code":"// The result of dump.js is a big JSON tree\n// which can be easily serialized (for instance\n// to be sent from a webworker to the main app\n// or through Node's IPC), but we want\n// a (circular) DOM-like interface for walking\n// through the data. \nmodule.exports = function circularize(page) {\n  page.paragraphs = [];\n  page.lines = [];\n  page.words = [];\n  page.symbols = [];\n  page.blocks.forEach(function (block) {\n    block.page = page;\n    block.lines = [];\n    block.words = [];\n    block.symbols = [];\n    block.paragraphs.forEach(function (para) {\n      para.block = block;\n      para.page = page;\n      para.words = [];\n      para.symbols = [];\n      para.lines.forEach(function (line) {\n        line.paragraph = para;\n        line.block = block;\n        line.page = page;\n        line.symbols = [];\n        line.words.forEach(function (word) {\n          word.line = line;\n          word.paragraph = para;\n          word.block = block;\n          word.page = page;\n          word.symbols.forEach(function (sym) {\n            sym.word = word;\n            sym.line = line;\n            sym.paragraph = para;\n            sym.block = block;\n            sym.page = page;\n            sym.line.symbols.push(sym);\n            sym.paragraph.symbols.push(sym);\n            sym.block.symbols.push(sym);\n            sym.page.symbols.push(sym);\n          });\n          word.paragraph.words.push(word);\n          word.block.words.push(word);\n          word.page.words.push(word);\n        });\n        line.block.lines.push(line);\n        line.page.lines.push(line);\n      });\n      para.page.paragraphs.push(para);\n    });\n  });\n  return page;\n};","map":null,"metadata":{},"sourceType":"script"}